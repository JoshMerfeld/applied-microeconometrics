% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\input{header.tex}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{Assignment 3}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{Ph.D.~Applied Microeconometrics\\
KDI School Fall 2024}
\author{}
\date{\vspace{-2.5em}2024-10-28}

\begin{document}
\maketitle

\textbf{Due date: Monday, November 4th at 6:59pm}

For this assignment, you will be using the \texttt{castle.dta} data -- which I've put in the assignment folder -- the same data we have been using this week in class.

Below is a list of tasks. I would like you to create a properly formated PDF file, as if it were a paper. This means that raw code should not appear in the PDF file. When you estimate a regression, the choice of standard errors is up to you. However, I'd like you to justify your choice of standard errors.

Tasks:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Create a table with summary statistics \emph{by year}. It should have five columns:

  \begin{itemize}
  \tightlist
  \item
    The year
  \item
    The proportion of states in the year who have adopted a castle doctrine law (cdl variable)
  \item
    The mean homicide rate (per 100,000 people) for the year
  \item
    The mean population (log) for the year
  \item
    The mean unemployment rate for the year
  \end{itemize}
\item
  Create a figure that shows adoption of castle doctrine laws over time. I'll leave the details up to you. Make sure to describe the figure and interpret it.
\item
  Create a table with four separate regressions:

  \begin{itemize}
  \tightlist
  \item
    The first regression should be a simple regression of the homicide rate on the castle doctrine law variable.
  \item
    The second regression should be a simple regression of the homicide rate on the castle doctrine law variable and some controls: population (log), income (log), and unemployment rate. Keep in mind that this is at the state level.
  \item
    The third regression should add state fixed effects.
  \item
    The fourth regression should have both state and year fixed effects. This is the ``two-way fixed effects'' specification we've discussed in class.
  \end{itemize}
\item
  Create a \emph{new} table that includes the same four regressions, but I want you to include some different statistics below the coefficient:

  \begin{itemize}
  \tightlist
  \item
    p-value with standard errors clustered at the state level
  \item
    p-value calculated using the wild bootstrap, clustered at the state level
  \end{itemize}
\item
  Discuss the difference in identification strategy across the different columns. How does adding controls and fixed effects change the interpretation of the coefficient on the castle doctrine law variable? What are the assumptions required to interpret the coefficient on the castle doctrine law variable as a causal effect? You do not need to do this for both 3. and 4. Just doing it after 4. is sufficient.
\item
  Finally, I want you to estimate a causal estimate that is robust to treatment heterogeneity across time. Which you choose is up to you. As a reminder, we used \texttt{did2s} in class. How different are the results? Which do you trust the most? Why?
\end{enumerate}

Make sure to \emph{interpret} your output. Do not just present regressions/figures/summary statistics; I also want you to think about what coefficients mean. You can keep your focus on the cdl variable, not the other controls in the regression.

As before, please submit the following files:

\begin{itemize}
\tightlist
\item
  Your R Markdown file
\item
  Your knitted PDF file
\item
  Any other scripts you used to complete the assignment
\end{itemize}

\end{document}
